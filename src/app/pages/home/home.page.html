<ion-header>
  <ion-toolbar>
    <ion-title>{{ isAdmin ? 'Bienvenido Administrador' : 'Bienvenido Estudiante' }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="main-title">
    <h1>¿En qué puedo ayudarte?</h1>
  </div>

  <div class="options-box">
    <p class="options-title">{{ isAdmin ? 'Opciones de Administrador' : 'Lo que puedo hacer por ti' }}</p>
    <div class="options-buttons">
      <!-- Si es estudiante, abre el chat con la consulta. Si es admin, no hace nada (no rompemos su flujo). -->
      <ion-button expand="block" fill="solid" class="option-btn"
        (click)="!isAdmin && goToChat('Jpix, quiero que organices mi horario para este semestre')">
        {{ isAdmin ? 'Gestionar Usuarios' : 'Organizar tu horario' }}
      </ion-button>

      <ion-button expand="block" fill="solid" class="option-btn"
        (click)="!isAdmin && goToChat('Jpix, quiero saber a qué distancia está Sausalito de Casa Central')">
        {{ isAdmin ? 'Ver Reportes' : 'Consultar ubicación' }}
      </ion-button>

      <ion-button expand="block" fill="solid" class="option-btn"
        (click)="!isAdmin && goToChat('Jpix, añade Inglés II sección A')">
        {{ isAdmin ? 'Configuraciones' : 'Añadir asignatura' }}
      </ion-button>
    </div>
  </div>

  <div class="search">
    <ion-input
      class="search__input"
      type="text"
      placeholder="Ingrese su consulta"
      [(ngModel)]="consulta">
    </ion-input>

    <div class="search__divider"></div>

    <ion-button class="search__btn" fill="clear" (click)="onBuscar()">
      <ion-icon slot="icon-only" name="search-outline"></ion-icon>
    </ion-button>
  </div>

  <section class="suggestion">
    <img
      class="suggestion__avatar"
      src="assets/images/assistant-logo.png"
      alt="Asistente Jpix" />

    <div class="suggestion__text">
      <p class="suggestion__title">
        <strong><u>Recomendación de escritura:</u></strong>
      </p>
      <p class="suggestion__line">
        <em>“Jpix, quiero que organices mi horario para este semestre”</em>
      </p>
      <p class="suggestion__line">
        <em>“Jpix, quiero saber a qué distancia está Sausalito de Casa Central”</em>
      </p>
    </div>
  </section>

  <!-- Chat con el asistente (se expande al ingresar una consulta) -->
  <div *ngIf="isChatOpen" class="chat-box expand">
    <div class="chat-messages">
      <div *ngFor="let message of assistantMessages" class="chat-message">
        <p>{{ message }}</p>
      </div>
    </div>
  </div>
</ion-content>
